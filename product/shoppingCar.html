<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="/css/shoppingCar.css">
    <link rel="stylesheet" href="/vendors/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="/vendors/jquery/jquery-3.4.1.min.js"></script>
    <script src="/vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div class="search_area">
            <h3><i class="fas fa-shopping-cart" style="font-size:2em"></i>購物車</h3>
        	</div>
        </div>
        <div class="col-md-6">
          <div class="search_area">
        		<input type="text" id="search" placeholder="請輸入商品編號" />
        		<span class="searchIcon"><i class="fa fa-search"></i></span>
        	</div>
        </div>
      </div>

      <!-- 搜尋用戶在redis的購物車再比對oracle商品資料，
      動態產生商品選項及庫存數量，
      若原加入購物車時的數量超過商品庫存量則覆寫回來
      若原加入購物車時的商品選項已經不存在則表示物品失效 -->
      <div class="row itemTable justify-content-center">
        <div class="col-12 shoppingCar">
          <table>
            <!-- =======================標題欄======================= -->
            <tr>
              <th style="width: 6%;"><input class="selectAll" type="checkbox" name="" value=""></th>
              <th>預覽圖</th>
              <th>商品名稱</th>
              <th>選擇</th>
              <th>單價</th>
              <th>數量</th>
              <th>小計</th>
              <th style="width: 7%;">詢問</th>
              <th style="width: 7%;">刪除</th>
            </tr>

            <!-- =======================商品======================= -->
            <tr>
              <td><input class="selectOne" type="checkbox" name="" value=""></td>
              <td>
                <div class="img_area">
                  <a href="#"><img class="img_Preview" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRlHYMzh5mYwX_ag7DrgR2NrWYb8PGvDd2gkM2OW4AoO2VDVmbY&usqp=CAU" alt=""></a>
                </div>
              </td>
              <td><a class="productName" data-product_ID="PID000001" href="#">231231321231132</a></td>
              <td>
                <div class="spc">
                  <select class="" name="">
                    <option value="" data-productDetail_ID="pd_ID000001" data-price="10000">一二三四五六七八九十</option>
                    <option value="" data-productDetail_ID="pd_ID000002" data-price="2000" selected>AAAAAAAAAAAA</option>
                  </select>
                </div>
              </td>
              <td class="price">98800</td>
              <td>
                <div class="quantity">
                  <input class="input_quantity" type="number" name="" value="1" min="1" max="">
                </div>
              </td>
              <td class="subtotal"></td>
              <td>
                <button class="ask" type="button" name="button" data-toggle="modal" data-target="#exampleModal">
                  <i class="far fa-envelope" style="font-size:1.5em"></i>
                </button>
              </td>
              <td>
                <button class="removeOne" type="button" name="button">
                  <i class="fas fa-trash-alt" style="font-size:1.5em"></i>
                </button>
              </td>
            </tr>

            <tr>
              <td><input class="selectOne" type="checkbox" name="" value=""></td>
              <td>
                <div class="img_area">
                  <a href="#"><img class="img_Preview" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRlHYMzh5mYwX_ag7DrgR2NrWYb8PGvDd2gkM2OW4AoO2VDVmbY&usqp=CAU" alt=""></a>
                </div>
              </td>
              <td><a class="productName" data-product_ID="PID000001" href="#">231231321231132</a></td>
              <td>
                <div class="spc">
                  <select class="" name="">
                    <option value="" data-productDetail_ID="pd_ID000003" data-price="300">一二三四五六七八九十</option>
                    <option value="" data-productDetail_ID="pd_ID000004" data-price="400">一二三四五六七八九十</option>
                  </select>
                </div>
              </td>
              <td class="price">98800</td>
              <td>
                <div class="quantity">
                  <input class="input_quantity" type="number" name="" value="1" min="1" max="">
                </div>
              </td>
              <td class="subtotal"></td>
              <td>
                <button class="ask" type="button" name="button" data-toggle="modal" data-target="#exampleModal">
                  <i class="far fa-envelope" style="font-size:1.5em"></i>
                </button>
              </td>
              <td>
                <button class="removeOne" type="button" name="button">
                  <i class="fas fa-trash-alt" style="font-size:1.5em"></i>
                </button>
              </td>
            </tr>

            <!-- ============失效商品=========== -->
            <tr class="gap">
              <td></td>
            </tr>
            <tr class="failureArea">
              <th></th>
              <!-- <th style="width: 6%;"><input class="selectFailureAll" type="checkbox" name="" value=""></th> -->
              <th>預覽圖</th>
              <th colspan="5">失效商品</th>
              <th>詢問</th>
              <th>刪除</th>
            </tr>

            <tr class="failureItem">
              <td></td>
              <!-- <td><input class="selectFailureOne" type="checkbox" name="" value=""></td> -->
              <td>
                <div class="img_area">
                  <a href="#"><img class="img_Preview" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRlHYMzh5mYwX_ag7DrgR2NrWYb8PGvDd2gkM2OW4AoO2VDVmbY&usqp=CAU" alt=""></a>
                </div>
              </td>
              <td colspan="5"><a class="productName" data-product_ID="PID000001" href="#">231231321231132</a></td>
              <td>
                <button class="ask" type="button" name="button" data-toggle="modal" data-target="#exampleModal">
                  <i class="far fa-envelope" style="font-size:1.5em"></i>
                </button>
              </td>
              <td>
                <button class="removeOne" type="button" name="button">
                  <i class="fas fa-trash-alt" style="font-size:1.5em"></i>
                </button>
              </td>
            </tr>

            <tr class="failureItem">
              <td></td>
              <!-- <td><input class="selectFailureOne" type="checkbox" name="" value=""></td> -->
              <td>
                <div class="img_area">
                  <a href="#"><img class="img_Preview" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRlHYMzh5mYwX_ag7DrgR2NrWYb8PGvDd2gkM2OW4AoO2VDVmbY&usqp=CAU" alt=""></a>
                </div>
              </td>
              <td colspan="5"><a class="productName" data-product_ID="PID000001" href="#">231231321231132</a></td>
              <td>
                <button class="ask" type="button" name="button" data-toggle="modal" data-target="#exampleModal">
                  <i class="far fa-envelope" style="font-size:1.5em"></i>
                </button>
              </td>
              <td>
                <button class="removeOne" type="button" name="button">
                  <i class="fas fa-trash-alt" style="font-size:1.5em"></i>
                </button>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <div class="row clearItem justify-content-center">
        <div class="col">
          <div class="removeArea">
            <button class="removeSelect" type="button" name="button">刪除勾選的商品</button>
            <button class="removeFailure" type="button" name="button">清除全部失效商品</button>
            <hr>
          </div>
        </div>
      </div>
      <div class="row checkoutArea justify-content-end">
        <div class="col-md-4">
          <div class="">
            <a>購買(</a>
            <a class="sumQuantity"></a>
            <a>)個商品</a>
            <a>，總計$ </a>
            <a class="sumPrice"></a>
          </div>
        </div>
        <div class="col-md-2">
          <div class="">
            <button class="checkout" type="button" name="button">確認結帳</button>
            <hr>
          </div>
        </div>
      </div>

      </div>
    </div>



    <button type="button" class="btn btn-light" data-toggle="modal" data-target="#exampleModal">
      <svg class="svg-inline--fa fa-pen fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
        <path fill="currentColor" d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"></path>
      </svg><!-- <i class="fas fa-pen"></i> -->
    </button>
    <!-- 這邊是下彈視窗 -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <form method="POST" action="<c:url value=" /inbox/WriteMail.Controller" />">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">新增信件</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!--            <div class="form-group">
                  <label for="recipient-name" class="col-form-label">收件者:</label>
                  <input type="text" class="form-control" name="receiver" id="write_name">
                  <input type="text" class="form-control" name="emp_ID" id="write_name">
                </div> -->
            <div class="form-group">
              <label for="write_name" class="col-form-label">收件者:</label>
              <select class="form-control" name="receiver" id="write_name">
                <c:forEach var="emp1" items="${empService.all }">
                  <option value="${emp1.emp_ID }">${emp1.emp_Name }</option>
                </c:forEach>

              </select>
            </div>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">標題:</label>
              <input type="text" class="form-control" name="title" id="write_title" value="" readonly>
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">內容:</label>
              <textarea class="form-control" rows="10" name="message" id="write_message"></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
            <input type="hidden" name="state" id="write_state" value="1">
            <input type="hidden" id="write_id" value="${member.member_ID }">
            <button type="submit" name="action" value="writeMail" class="btn btn-primary">送出</button>
            <button class="writeMail btn btn-primary" type="button">送出Ajax</button>
          </div>
          </form>
        </div>
      </div>
    </div>

    <script src="/js/shoppingCar.js"></script>
  </body>
</html>
